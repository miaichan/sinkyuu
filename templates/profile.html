<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>プロフィール</title>
    <link rel="stylesheet" href="/static/styles.css?v=2" />
  </head>

  <body style="background: #f5f6f8">
    <div class="select" style="background-color: #faf8f2">
      <h1>Profile</h1>

      <div style="text-align: left; width: 100%; max-width: 360px">
        <p><strong>Email:</strong> {{ user.email }}</p>
        <p>
          <strong>Name:</strong>
          {% if user.name %}{{ user.name }}{% else %}(未設定){% endif %}
        </p>

        <form method="post" style="margin-top: 12px">
            <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}" />
          <label for="name" style="display: block; margin-bottom: 6px"
            >表示名を変更</label
          >
          <input
            id="name"
            name="name"
            type="text"
            value="{{ user.name or '' }}"
            placeholder="例）Taro"
            style="width: 100%; padding: 10px; border-radius: 8px"
          />
          <button
            type="submit"
            class="answer-submit"
            style="width: 100%; margin-top: 10px"
          >
            Save
          </button>
        </form>

        <hr style="margin: 18px 0" />

        <h2 style="margin: 0 0 10px 0">Badges</h2>

        {% if badges and badges|length > 0 %}
        <div style="display: grid; gap: 10px">
          {% for b in badges %}
          <div
            style="padding: 10px; border: 1px solid #e6e6e6; border-radius: 12px"
          >
            <div style="display: flex; gap: 8px; align-items: center">
              {% if b.earned %}
              <span class="tag is-success">獲得</span>
              {% else %}
              <span class="tag is-light">未獲得</span>
              {% endif %}
              <strong>{{ b.name }}</strong>
            </div>
            {% if b.description %}
            <p style="margin-top: 6px">{{ b.description }}</p>
            {% endif %}
          </div>
          {% endfor %}
        </div>
        {% else %}
        <p>まだバッジがありません。</p>
        {% endif %}

        <div style="margin-top: 18px; display: flex; gap: 10px">
          <a href="/select" class="answer-submit" style="flex: 1">Back</a>
          <a href="/logout" class="answer-submit" style="flex: 1">Logout</a>
        </div>
      </div>
    </div>
  </body>
</html>
